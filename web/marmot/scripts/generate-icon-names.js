#!/usr/bin/env node
// Extracts icon names from @iconify/json for local search in the IconPicker.
// Run: node scripts/generate-icon-names.js

import { readFileSync, writeFileSync } from 'fs';
import { join, dirname } from 'path';
import { fileURLToPath } from 'url';

const __dirname = dirname(fileURLToPath(import.meta.url));
const sets = ['simple-icons', 'material-symbols'];

const result = {};
for (const set of sets) {
	const data = JSON.parse(
		readFileSync(join(__dirname, '../node_modules/@iconify/json/json', set + '.json'), 'utf8')
	);
	result[set] = Object.keys(data.icons).sort();
}

const total = Object.values(result).reduce((sum, arr) => sum + arr.length, 0);

const output = `// Auto-generated by scripts/generate-icon-names.js - do not edit manually
// ${total} icons across ${sets.length} sets
export const iconNames: Record<string, string[]> = ${JSON.stringify(result)};
`;

writeFileSync(join(__dirname, '../src/lib/icon-names.generated.ts'), output);
console.log(
	`Generated ${total} icon names (${sets.map((s) => `${s}: ${result[s].length}`).join(', ')})`
);
